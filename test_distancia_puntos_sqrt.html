<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Distancia Entre Puntos - Sqrt Fix</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container mt-4">
        <h1>Test: Distancia Entre Puntos - Sqrt Fix</h1>
        
        <div class="alert alert-info">
            <strong>üéØ Objetivo:</strong> Verificar que la f√≥rmula de distancia entre puntos muestre s√≠mbolos ‚àö correctos, no c√≥digo LaTeX crudo.
        </div>
        
        <!-- Test 1: F√≥rmula original problem√°tica -->
        <div class="card mb-4">
            <div class="card-header bg-danger text-white">
                <h3>‚ùå ANTES: F√≥rmula problem√°tica (LaTeX)</h3>
            </div>
            <div class="card-body">
                <p><strong>C√≥digo LaTeX original:</strong></p>
                <code>$$d = \sqrt{(x_1 - x_0)^2 + (y_1 - y_0)^2}$$</code>
                <p class="mt-2"><strong>Problema:</strong> Se mostraba como c√≥digo crudo en lugar de s√≠mbolo matem√°tico.</p>
            </div>
        </div>
        
        <!-- Test 2: Nueva f√≥rmula CSS -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h3>‚úÖ DESPU√âS: F√≥rmula corregida (CSS)</h3>
            </div>
            <div class="card-body">
                <p><strong>Nueva implementaci√≥n CSS:</strong></p>
                <div class="math-equation" style="font-size: 18px; text-align: center;">
                    d = <span class="sqrt-symbol">(x‚ÇÅ - x‚ÇÄ)¬≤ + (y‚ÇÅ - y‚ÇÄ)¬≤</span>
                </div>
                <p class="mt-2"><strong>Ventaja:</strong> Renderizado inmediato sin dependencias de MathJax.</p>
            </div>
        </div>
        
        <!-- Test 3: Simulaci√≥n de herramienta completa -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>üß™ Simulaci√≥n: Herramienta de Distancia Completa</h3>
            </div>
            <div class="card-body">
                <div class="distancia-puntos-tool">
                    <h4 class="main-title">Distancia Entre Dos Puntos del Plano</h4>
                    
                    <!-- Panel de entrada de datos -->
                    <div class="input-panel mb-4">
                        <h5 style="color: #2c3e50; margin-bottom: 20px;">Coordenadas de los Puntos</h5>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="point-p0">Punto P‚ÇÄ</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="x0" class="form-label">Coordenada x‚ÇÄ:</label>
                                            <input type="number" id="x0" class="form-control" value="1" step="0.5">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="y0" class="form-label">Coordenada y‚ÇÄ:</label>
                                            <input type="number" id="y0" class="form-control" value="1" step="0.5">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="point-p1">Punto P‚ÇÅ</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="x1" class="form-label">Coordenada x‚ÇÅ:</label>
                                            <input type="number" id="x1" class="form-control" value="4" step="0.5">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="y1" class="form-label">Coordenada y‚ÇÅ:</label>
                                            <input type="number" id="y1" class="form-control" value="5" step="0.5">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Panel de f√≥rmula -->
                    <div class="formula-panel">
                        <h5 style="color: #1976d2;">F√≥rmula de Distancia Euclidiana:</h5>
                        <div class="math-equation" style="font-size: 18px; text-align: center;">
                            d = <span class="sqrt-symbol">(x‚ÇÅ - x‚ÇÄ)¬≤ + (y‚ÇÅ - y‚ÇÄ)¬≤</span>
                        </div>
                    </div>
                    
                    <!-- Ejemplo de c√°lculo -->
                    <div class="calculation-example mt-4">
                        <h5 style="color: #e67e22;">Ejemplo de C√°lculo:</h5>
                        <div class="bg-light p-3">
                            <p><strong>Dados los puntos:</strong> P‚ÇÄ(1, 1) y P‚ÇÅ(4, 5)</p>
                            <p><strong>Aplicando la f√≥rmula:</strong></p>
                            <div class="math-equation">
                                d = <span class="sqrt-symbol">(4 - 1)¬≤ + (5 - 1)¬≤</span>
                            </div>
                            <div class="math-equation">
                                d = <span class="sqrt-symbol">3¬≤ + 4¬≤</span>
                            </div>
                            <div class="math-equation">
                                d = <span class="sqrt-symbol">9 + 16</span>
                            </div>
                            <div class="math-equation">
                                d = <span class="sqrt-symbol">25</span> = 5
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test 4: Variaciones de sqrt -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>üîÑ Variaciones de F√≥rmulas de Distancia</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>Distancia 2D</h6>
                        <div class="math-equation">
                            d = <span class="sqrt-symbol">Œîx¬≤ + Œîy¬≤</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h6>Distancia 3D</h6>
                        <div class="math-equation small">
                            d = <span class="sqrt-symbol">Œîx¬≤ + Œîy¬≤ + Œîz¬≤</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h6>Distancia Ponderada</h6>
                        <div class="math-equation small">
                            d = <span class="sqrt-symbol">w‚ÇÅŒîx¬≤ + w‚ÇÇŒîy¬≤</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test 5: Conversi√≥n autom√°tica -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>‚öôÔ∏è Test de Conversi√≥n Autom√°tica</h3>
            </div>
            <div class="card-body">
                <button class="btn btn-primary mb-3" onclick="testConversion()">Aplicar Conversi√≥n CSS sqrt</button>
                <div id="conversion-content">
                    <p>F√≥rmula LaTeX: $$d = \sqrt{(x_1 - x_0)^2 + (y_1 - y_0)^2}$$</p>
                    <p>Formato mixto: La distancia es sqrt{(x-h)^2 + (y-k)^2}</p>
                    <p>Con par√©ntesis: sqrt((x1-x0)^2 + (y1-y0)^2)</p>
                </div>
            </div>
        </div>
        
        <!-- Verificaci√≥n -->
        <div class="alert alert-success">
            <h4 class="alert-heading">‚úÖ Verificaci√≥n</h4>
            <p>Si todas las f√≥rmulas de arriba muestran el s√≠mbolo ‚àö correctamente y no c√≥digo LaTeX crudo, entonces la correcci√≥n est√° funcionando.</p>
            <hr>
            <p class="mb-0">
                <strong>Esperado:</strong> ‚àö(x‚ÇÅ - x‚ÇÄ)¬≤ + (y‚ÇÅ - y‚ÇÄ)¬≤ <br>
                <strong>NO esperado:</strong> \sqrt{(x_1 - x_0)^2 + (y_1 - y_0)^2}
            </p>
        </div>
        
        <!-- Implementaci√≥n t√©cnica -->
        <div class="card">
            <div class="card-header">
                <h3>üîß Implementaci√≥n T√©cnica</h3>
            </div>
            <div class="card-body">
                <h5>Cambios Aplicados:</h5>
                <ol>
                    <li><strong>Cambio en js/script1.js (l√≠nea ~659):</strong>
                        <br><code>ANTES: &lt;p class="math"&gt;$$d = \sqrt{(x_1 - x_0)^2 + (y_1 - y_0)^2}$$&lt;/p&gt;</code>
                        <br><code>DESPU√âS: &lt;div class="math-equation"&gt;d = &lt;span class="sqrt-symbol"&gt;(x‚ÇÅ - x‚ÇÄ)¬≤ + (y‚ÇÅ - y‚ÇÄ)¬≤&lt;/span&gt;&lt;/div&gt;</code>
                    </li>
                    <li><strong>Validaci√≥n CSS a√±adida:</strong>
                        <br><code>app.validateAndFixSqrtFormulasWithCSS(toolContent);</code>
                    </li>
                    <li><strong>CSS styling:</strong> Clases <code>.sqrt-symbol</code> y <code>.sqrt-simple</code></li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Load validation functions -->
    <script src="js/script1.js"></script>
    
    <script>
        function testConversion() {
            const conversionContent = document.getElementById('conversion-content');
            
            if (window.app && window.app.convertSqrtToCSS) {
                console.log('Aplicando conversi√≥n CSS sqrt...');
                const originalContent = conversionContent.innerHTML;
                const convertedContent = window.app.convertSqrtToCSS(originalContent);
                conversionContent.innerHTML = convertedContent;
                console.log('Conversi√≥n completada:', originalContent, '->', convertedContent);
            } else {
                console.error('Funci√≥n de conversi√≥n no disponible');
                alert('Error: Las funciones de conversi√≥n no est√°n disponibles');
            }
        }
        
        // Verificaci√≥n autom√°tica
        window.addEventListener('load', function() {
            console.log('‚úÖ Test de distancia entre puntos cargado');
            
            // Verificar si hay c√≥digo LaTeX crudo
            setTimeout(() => {
                const bodyText = document.body.innerText;
                if (bodyText.includes('\\sqrt') && !bodyText.includes('c√≥digo LaTeX')) {
                    console.warn('‚ö†Ô∏è Detectado c√≥digo LaTeX crudo en la p√°gina');
                } else {
                    console.log('‚úÖ No se detect√≥ c√≥digo LaTeX crudo - correcci√≥n exitosa');
                }
            }, 1000);
        });
    </script>
</body>
</html>
