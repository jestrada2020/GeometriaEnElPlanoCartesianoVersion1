<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Final - Coordenadas Paramétricas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            chtml: {
                displayAlign: 'center',
                displayIndent: '2em'
            }
        };
    </script>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div id="sidebar" class="bg-light vh-100 p-3">
                    <h5>Herramientas de Prueba</h5>
                    <button class="btn btn-outline-primary btn-sm mb-2 w-100" onclick="testCirculo()">Círculo</button>
                    <button class="btn btn-outline-success btn-sm mb-2 w-100" onclick="testElipse()">Elipse</button>
                    <button class="btn btn-outline-warning btn-sm mb-2 w-100" onclick="testHiperbola()">Hipérbola</button>
                    <button class="btn btn-outline-info btn-sm mb-2 w-100" onclick="testParabolaV()">Parábola Vertical</button>
                    <button class="btn btn-outline-secondary btn-sm mb-2 w-100" onclick="testParabolaH()">Parábola Horizontal</button>
                    
                    <hr>
                    <div class="alert alert-info alert-sm">
                        <h6>Estado del Test:</h6>
                        <div id="test-status">Iniciando...</div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <div class="container mt-3">
                    <h1>Test Final - Verificación de Coordenadas Paramétricas</h1>
                    
                    <div id="tool-content">
                        <div class="alert alert-primary">
                            <h4>Instrucciones de Prueba</h4>
                            <p>Haga clic en cada herramienta del menú lateral para verificar que:</p>
                            <ul>
                                <li>✅ Las coordenadas paramétricas se rendericen correctamente (sin código LaTeX crudo)</li>
                                <li>✅ Las ecuaciones principales se muestren correctamente</li>
                                <li>✅ Los controles interactivos funcionen</li>
                                <li>✅ MathJax procese todas las fórmulas</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/script1.js"></script>
    <script>
        function testCirculo() {
            updateTestStatus('Probando Círculo...');
            app.loadTool('conceptoCirculo');
            setTimeout(() => {
                checkParametricRendering('coordenadasParametricas', 'Círculo');
            }, 1000);
        }
        
        function testElipse() {
            updateTestStatus('Probando Elipse...');
            app.loadTool('conceptoElipse');
            setTimeout(() => {
                checkParametricRendering('coordenadasParametricasElipse', 'Elipse');
            }, 1000);
        }
        
        function testHiperbola() {
            updateTestStatus('Probando Hipérbola...');
            app.loadTool('conceptoHiperbola');
            setTimeout(() => {
                checkParametricRendering('coordenadasParametricasHiperbola', 'Hipérbola');
            }, 1000);
        }
        
        function testParabolaV() {
            updateTestStatus('Probando Parábola Vertical...');
            app.loadTool('parabolaVertical');
            setTimeout(() => {
                updateTestStatus('Parábola Vertical cargada correctamente');
            }, 1000);
        }
        
        function testParabolaH() {
            updateTestStatus('Probando Parábola Horizontal...');
            app.loadTool('parabolaHorizontal');
            setTimeout(() => {
                updateTestStatus('Parábola Horizontal cargada correctamente');
            }, 1000);
        }
        
        function updateTestStatus(message) {
            const statusElement = document.getElementById('test-status');
            const timestamp = new Date().toLocaleTimeString();
            statusElement.innerHTML += `<div class="small">[${timestamp}] ${message}</div>`;
            statusElement.scrollTop = statusElement.scrollHeight;
        }
        
        function checkParametricRendering(elementId, toolName) {
            const element = document.getElementById(elementId);
            if (element) {
                const content = element.innerHTML;
                if (content.includes('\\left\\{') || content.includes('\\begin{')) {
                    if (content.includes('MathJax') || element.querySelector('.MathJax')) {
                        updateTestStatus(`✅ ${toolName}: Coordenadas paramétricas renderizadas correctamente`);
                    } else {
                        updateTestStatus(`⚠️ ${toolName}: Coordenadas paramétricas encontradas pero posiblemente no renderizadas`);
                    }
                } else if (content.trim() === '') {
                    updateTestStatus(`❌ ${toolName}: Elemento de coordenadas paramétricas vacío`);
                } else {
                    updateTestStatus(`❓ ${toolName}: Contenido no reconocido en coordenadas paramétricas`);
                }
            } else {
                updateTestStatus(`❌ ${toolName}: Elemento de coordenadas paramétricas no encontrado`);
            }
        }
        
        // Verificar MathJax al cargar
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (typeof MathJax !== 'undefined') {
                    updateTestStatus('✅ MathJax cargado correctamente');
                    if (typeof app !== 'undefined') {
                        updateTestStatus('✅ Aplicación principal cargada');
                        updateTestStatus('Listo para realizar pruebas. Seleccione una herramienta del menú.');
                    } else {
                        updateTestStatus('❌ Error: Aplicación principal no cargada');
                    }
                } else {
                    updateTestStatus('❌ Error: MathJax no disponible');
                }
            }, 2000);
        });
    </script>
</body>
</html>
