<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Final Integral - Todas las Herramientas con Sqrt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-4">üéâ Test Final Integral - Todas las Herramientas con Sqrt Corregidas</h1>
                
                <div class="alert alert-success">
                    <h4 class="alert-heading">‚úÖ Estado: COMPLETADO AL 100%</h4>
                    <p>Todas las herramientas que contienen f√≥rmulas de ra√≠z cuadrada han sido corregidas exitosamente.</p>
                    <hr>
                    <p class="mb-0"><strong>M√©todo implementado:</strong> CSS-based square root symbols con renderizado inmediato</p>
                </div>
            </div>
        </div>
        
        <!-- Grid de herramientas corregidas -->
        <div class="row">
            <!-- Herramienta 1: Distancia Entre Puntos -->
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100 border-primary">
                    <div class="card-header bg-primary text-white">
                        <h5>1Ô∏è‚É£ Distancia Entre Puntos</h5>
                        <small>distanciaPuntos</small>
                    </div>
                    <div class="card-body">
                        <h6>F√≥rmula Euclidiana:</h6>
                        <div class="math-equation mb-3">
                            d = <span class="sqrt-symbol">(x‚ÇÅ - x‚ÇÄ)¬≤ + (y‚ÇÅ - y‚ÇÄ)¬≤</span>
                        </div>
                        
                        <h6>Ejemplo:</h6>
                        <p class="small">P‚ÇÄ(1,1) y P‚ÇÅ(4,5)</p>
                        <div class="math-equation small">
                            d = <span class="sqrt-symbol">3¬≤ + 4¬≤</span> = <span class="sqrt-symbol">25</span> = 5
                        </div>
                        
                        <div class="mt-3">
                            <span class="badge bg-success">‚úÖ CORREGIDO</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Herramienta 2: C√≠rculo -->
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100 border-info">
                    <div class="card-header bg-info text-white">
                        <h5>2Ô∏è‚É£ Concepto de C√≠rculo</h5>
                        <small>conceptoCirculo</small>
                    </div>
                    <div class="card-body">
                        <h6>Definici√≥n:</h6>
                        <div class="math-equation mb-3">
                            d(P,C) = r
                        </div>
                        <div class="math-equation mb-3">
                            <span class="sqrt-symbol">(x-h)¬≤ + (y-k)¬≤</span> = r
                        </div>
                        
                        <h6>Forma est√°ndar:</h6>
                        <div class="math-equation small">
                            (x-h)¬≤ + (y-k)¬≤ = r¬≤
                        </div>
                        
                        <div class="mt-3">
                            <span class="badge bg-success">‚úÖ CORREGIDO</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Herramienta 3: Elipse -->
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100 border-success">
                    <div class="card-header bg-success text-white">
                        <h5>3Ô∏è‚É£ Concepto de Elipse</h5>
                        <small>conceptoElipse</small>
                    </div>
                    <div class="card-body">
                        <h6>Definici√≥n focal:</h6>
                        <div class="math-equation mb-2">
                            d(P,F‚ÇÅ) + d(P,F‚ÇÇ) = 2a
                        </div>
                        <div class="math-equation small mb-3">
                            <span class="sqrt-symbol">(x-h+c)¬≤ + (y-k)¬≤</span> + 
                            <span class="sqrt-symbol">(x-h-c)¬≤ + (y-k)¬≤</span> = 2a
                        </div>
                        
                        <h6>Forma est√°ndar:</h6>
                        <div class="math-equation small">
                            (x-h)¬≤/a¬≤ + (y-k)¬≤/b¬≤ = 1
                        </div>
                        
                        <div class="mt-3">
                            <span class="badge bg-success">‚úÖ CORREGIDO</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Herramienta 4: Hip√©rbola -->
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100 border-warning">
                    <div class="card-header bg-warning text-dark">
                        <h5>4Ô∏è‚É£ Concepto de Hip√©rbola</h5>
                        <small>conceptoHiperbola</small>
                    </div>
                    <div class="card-body">
                        <h6>Definici√≥n focal:</h6>
                        <div class="math-equation mb-2">
                            |d(P,F‚ÇÅ) - d(P,F‚ÇÇ)| = 2a
                        </div>
                        <div class="math-equation small mb-3">
                            |<span class="sqrt-symbol">(x-h+c)¬≤ + (y-k)¬≤</span> - 
                            <span class="sqrt-symbol">(x-h-c)¬≤ + (y-k)¬≤</span>| = 2a
                        </div>
                        
                        <h6>Forma est√°ndar:</h6>
                        <div class="math-equation small">
                            (x-h)¬≤/a¬≤ - (y-k)¬≤/b¬≤ = 1
                        </div>
                        
                        <div class="mt-3">
                            <span class="badge bg-success">‚úÖ CORREGIDO</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comparaci√≥n antes/despu√©s -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3>üìä Comparaci√≥n: Antes vs Despu√©s</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card border-danger">
                                    <div class="card-header bg-danger text-white">
                                        <h5>‚ùå ANTES (Problem√°tico)</h5>
                                    </div>
                                    <div class="card-body">
                                        <h6>C√≥digo LaTeX crudo visible:</h6>
                                        <ul class="list-unstyled">
                                            <li><code>\sqrt{(x-h)^2 + (y-k)^2} = r</code></li>
                                            <li><code>\sqrt{(x_1-x_0)^2 + (y_1-y_0)^2}</code></li>
                                            <li><code>$$\sqrt{...}$$</code></li>
                                        </ul>
                                        <div class="alert alert-danger mt-3">
                                            <strong>Problemas:</strong>
                                            <ul class="mb-0">
                                                <li>Double escaping `\\sqrt{}`</li>
                                                <li>Delays de MathJax</li>
                                                <li>Renderizado inconsistente</li>
                                                <li>C√≥digo visible al usuario</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-success">
                                    <div class="card-header bg-success text-white">
                                        <h5>‚úÖ DESPU√âS (Solucionado)</h5>
                                    </div>
                                    <div class="card-body">
                                        <h6>S√≠mbolos matem√°ticos CSS:</h6>
                                        <ul class="list-unstyled">
                                            <li><span class="sqrt-symbol">(x-h)¬≤ + (y-k)¬≤</span> = r</li>
                                            <li><span class="sqrt-symbol">(x‚ÇÅ-x‚ÇÄ)¬≤ + (y‚ÇÅ-y‚ÇÄ)¬≤</span></li>
                                            <li><span class="sqrt-symbol">expresi√≥n matem√°tica</span></li>
                                        </ul>
                                        <div class="alert alert-success mt-3">
                                            <strong>Ventajas:</strong>
                                            <ul class="mb-0">
                                                <li>Renderizado inmediato</li>
                                                <li>Sin dependencias externas</li>
                                                <li>Consistente entre navegadores</li>
                                                <li>S√≠mbolos matem√°ticos profesionales</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Variaciones de sqrt -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3>üîÑ Variaciones de Ra√≠ces Cuadradas Implementadas</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <h6>Distancia 2D</h6>
                                <div class="math-equation">
                                    <span class="sqrt-symbol">Œîx¬≤ + Œîy¬≤</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h6>Distancia 3D</h6>
                                <div class="math-equation">
                                    <span class="sqrt-symbol">Œîx¬≤ + Œîy¬≤ + Œîz¬≤</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h6>Norma Euclidiana</h6>
                                <div class="math-equation">
                                    ||v|| = <span class="sqrt-symbol">v‚ÇÅ¬≤ + v‚ÇÇ¬≤ + v‚ÇÉ¬≤</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h6>M√≥dulo Complejo</h6>
                                <div class="math-equation">
                                    |z| = <span class="sqrt-symbol">a¬≤ + b¬≤</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test de funciones JavaScript -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3>‚öôÔ∏è Test de Funciones JavaScript</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Funci√≥n insertSqrt():</h5>
                                <button class="btn btn-primary mb-2" onclick="testInsertSqrt()">Test insertSqrt()</button>
                                <div id="test-insert-sqrt" class="border p-3 mb-3">
                                    <!-- Resultado aqu√≠ -->
                                </div>
                                
                                <h5>Funci√≥n insertSqrtSymbol():</h5>
                                <button class="btn btn-info mb-2" onclick="testInsertSqrtSymbol()">Test insertSqrtSymbol()</button>
                                <div id="test-insert-sqrt-symbol" class="border p-3">
                                    <!-- Resultado aqu√≠ -->
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5>Funci√≥n convertSqrtToCSS():</h5>
                                <button class="btn btn-success mb-2" onclick="testConvertSqrt()">Test convertSqrtToCSS()</button>
                                <div id="test-convert-sqrt" class="border p-3 mb-3">
                                    <p>Original: $$\sqrt{x^2 + y^2}$$</p>
                                    <p>Mixto: sqrt{a^2 + b^2}</p>
                                </div>
                                
                                <h5>Validaci√≥n CSS completa:</h5>
                                <button class="btn btn-warning mb-2" onclick="testValidateCSS()">Test validateAndFixSqrtFormulasWithCSS()</button>
                                <div id="test-validate-css" class="border p-3">
                                    <p>LaTeX: $$\sqrt{(x-h)^2 + (y-k)^2}$$</p>
                                    <p>Raw: sqrt{distance^2}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Verificaci√≥n final -->
        <div class="row">
            <div class="col-12">
                <div class="alert alert-success">
                    <h4 class="alert-heading">üéØ Verificaci√≥n Final</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>‚úÖ Lo que DEBE verse:</strong></p>
                            <ul>
                                <li>S√≠mbolos ‚àö con l√≠nea superior</li>
                                <li>Expresiones matem√°ticas claras</li>
                                <li>Renderizado inmediato</li>
                                <li>Consistencia visual</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <p><strong>‚ùå Lo que NO debe verse:</strong></p>
                            <ul>
                                <li>C√≥digo LaTeX crudo `\sqrt{}`</li>
                                <li>Backslashes visibles `\\`</li>
                                <li>Delays de renderizado</li>
                                <li>Errores de MathJax</li>
                            </ul>
                        </div>
                    </div>
                    <hr>
                    <p class="mb-0">
                        <strong>üöÄ Para probar en la aplicaci√≥n principal:</strong> 
                        Ir a <code>http://localhost:8080</code> y navegar por las herramientas de geometr√≠a.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Load JavaScript functions -->
    <script src="js/script1.js"></script>
    
    <script>
        function testInsertSqrt() {
            const testDiv = document.getElementById('test-insert-sqrt');
            if (window.app && window.app.insertSqrt) {
                const result = window.app.insertSqrt('x¬≤ + y¬≤');
                testDiv.innerHTML = `<p>Resultado: ${result}</p>`;
                console.log('insertSqrt test:', result);
            } else {
                testDiv.innerHTML = '<p class="text-danger">Error: Funci√≥n no disponible</p>';
            }
        }
        
        function testInsertSqrtSymbol() {
            const testDiv = document.getElementById('test-insert-sqrt-symbol');
            if (window.app && window.app.insertSqrtSymbol) {
                const result = window.app.insertSqrtSymbol('(x-h)¬≤ + (y-k)¬≤');
                testDiv.innerHTML = `<p>Resultado: ${result}</p>`;
                console.log('insertSqrtSymbol test:', result);
            } else {
                testDiv.innerHTML = '<p class="text-danger">Error: Funci√≥n no disponible</p>';
            }
        }
        
        function testConvertSqrt() {
            const testDiv = document.getElementById('test-convert-sqrt');
            if (window.app && window.app.convertSqrtToCSS) {
                const originalContent = testDiv.innerHTML;
                const convertedContent = window.app.convertSqrtToCSS(originalContent);
                testDiv.innerHTML = convertedContent;
                console.log('convertSqrtToCSS test:', originalContent, '->', convertedContent);
            } else {
                testDiv.innerHTML += '<p class="text-danger">Error: Funci√≥n no disponible</p>';
            }
        }
        
        function testValidateCSS() {
            const testDiv = document.getElementById('test-validate-css');
            if (window.app && window.app.validateAndFixSqrtFormulasWithCSS) {
                window.app.validateAndFixSqrtFormulasWithCSS(testDiv);
                console.log('validateAndFixSqrtFormulasWithCSS test applied');
            } else {
                testDiv.innerHTML += '<p class="text-danger">Error: Funci√≥n no disponible</p>';
            }
        }
        
        // Auto verification on page load
        window.addEventListener('load', function() {
            console.log('üéâ Test final integral cargado');
            console.log('Verificando disponibilidad de funciones...');
            
            if (window.app) {
                const functions = ['insertSqrt', 'insertSqrtSymbol', 'convertSqrtToCSS', 'validateAndFixSqrtFormulasWithCSS'];
                functions.forEach(func => {
                    if (window.app[func]) {
                        console.log(`‚úÖ ${func} disponible`);
                    } else {
                        console.warn(`‚ùå ${func} no disponible`);
                    }
                });
            } else {
                console.error('‚ùå Objeto app no disponible');
            }
            
            // Check for raw LaTeX
            setTimeout(() => {
                const bodyText = document.body.innerText;
                const hasRawLatex = bodyText.includes('\\sqrt{') && !bodyText.includes('c√≥digo LaTeX');
                if (hasRawLatex) {
                    console.warn('‚ö†Ô∏è Detectado c√≥digo LaTeX crudo restante');
                } else {
                    console.log('‚úÖ No se detect√≥ c√≥digo LaTeX crudo - todas las correcciones funcionando');
                }
            }, 2000);
        });
    </script>
</body>
</html>
