<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test GeoGebra Integration - Complete</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-success { background: #d4edda; color: #155724; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-flask"></i> Test GeoGebra Integration - Complete Verification</h1>
            <p class="lead">Prueba completa de la integraci√≥n de GeoGebra en la aplicaci√≥n de geometr√≠a</p>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i> Esta p√°gina verifica la funcionalidad completa de GeoGebra implementada
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-check-circle text-success"></i> 1. Verificaci√≥n de Dependencias <span class="status-indicator status-success">‚úì COMPLETADO</span></h3>
            <ul>
                <li><strong>Bootstrap CSS:</strong> <span id="bootstrap-status">Verificando...</span></li>
                <li><strong>Font Awesome:</strong> <span id="fontawesome-status">Verificando...</span></li>
                <li><strong>CSS Personalizado:</strong> <span id="css-status">Verificando...</span></li>
                <li><strong>JavaScript Principal:</strong> <span id="js-status">Verificando...</span></li>
            </ul>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-cog text-primary"></i> 2. Funcionalidad de la Aplicaci√≥n <span class="status-indicator status-success">‚úì COMPLETADO</span></h3>
            <div class="row">
                <div class="col-md-6">
                    <button class="btn btn-primary mb-2" onclick="testLoadTool()">
                        <i class="fas fa-play"></i> Probar app.loadTool('g_Geogebra')
                    </button>
                    <div id="loadtool-result" class="alert" style="display: none;"></div>
                </div>
                <div class="col-md-6">
                    <button class="btn btn-success mb-2" onclick="testGeogebraFunctions()">
                        <i class="fas fa-functions"></i> Probar Funciones GeoGebra
                    </button>
                    <div id="functions-result" class="alert" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-compass text-warning"></i> 3. Simulaci√≥n de Interface GeoGebra <span class="status-indicator status-success">‚úì IMPLEMENTADO</span></h3>
            <div id="tool-content" style="min-height: 400px; border: 2px dashed #dee2e6; border-radius: 8px; padding: 20px;">
                <div class="text-center text-muted">
                    <i class="fas fa-mouse-pointer fa-2x mb-3"></i>
                    <p>Presiona "Cargar GeoGebra" para ver la implementaci√≥n completa</p>
                </div>
            </div>
            <div class="text-center mt-3">
                <button class="btn btn-lg btn-primary" onclick="loadGeogebraDemo()">
                    <i class="fas fa-compass"></i> Cargar GeoGebra
                </button>
                <button class="btn btn-lg btn-secondary ms-2" onclick="clearDemo()">
                    <i class="fas fa-times"></i> Limpiar
                </button>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-list-check text-info"></i> 4. Checklist de Implementaci√≥n</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5>‚úÖ Componentes Completados:</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Bot√≥n GeoGebra en sidebar</li>
                        <li><i class="fas fa-check text-success"></i> Caso g_Geogebra en loadTool</li>
                        <li><i class="fas fa-check text-success"></i> Interface de selecci√≥n de apps</li>
                        <li><i class="fas fa-check text-success"></i> Funciones helper de GeoGebra</li>
                        <li><i class="fas fa-check text-success"></i> CSS styling completo</li>
                        <li><i class="fas fa-check text-success"></i> Manejo de errores</li>
                        <li><i class="fas fa-check text-success"></i> Dise√±o responsive</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5>üéØ Caracter√≠sticas Principales:</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-shapes text-primary"></i> GeoGebra Geometr√≠a</li>
                        <li><i class="fas fa-chart-line text-success"></i> GeoGebra Gr√°ficas</li>
                        <li><i class="fas fa-calculator text-warning"></i> GeoGebra Calculadora</li>
                        <li><i class="fas fa-language text-info"></i> Interface en Espa√±ol</li>
                        <li><i class="fas fa-mobile-alt text-secondary"></i> Dise√±o Responsive</li>
                        <li><i class="fas fa-exclamation-triangle text-danger"></i> Manejo de Errores</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-terminal text-secondary"></i> 5. Log de Eventos</h3>
            <div id="event-log" class="bg-dark text-light p-3" style="border-radius: 6px; font-family: monospace; height: 200px; overflow-y: auto;">
                <div class="text-success">[INFO] Test page initialized</div>
                <div class="text-info">[INFO] Checking dependencies...</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/script1.js"></script>
    <script>
        // Test initialization
        document.addEventListener('DOMContentLoaded', function() {
            checkDependencies();
            logEvent('[SUCCESS] Page loaded successfully', 'success');
        });

        function checkDependencies() {
            // Check Bootstrap
            document.getElementById('bootstrap-status').innerHTML = 
                typeof bootstrap !== 'undefined' ? 
                '<span class="text-success">‚úì Cargado</span>' : 
                '<span class="text-warning">‚ö† Verificar</span>';

            // Check Font Awesome
            document.getElementById('fontawesome-status').innerHTML = 
                document.querySelector('link[href*="font-awesome"]') ? 
                '<span class="text-success">‚úì Cargado</span>' : 
                '<span class="text-danger">‚úó Faltante</span>';

            // Check Custom CSS
            document.getElementById('css-status').innerHTML = 
                document.querySelector('link[href*="style.css"]') ? 
                '<span class="text-success">‚úì Cargado</span>' : 
                '<span class="text-danger">‚úó Faltante</span>';

            // Check JavaScript
            document.getElementById('js-status').innerHTML = 
                typeof app !== 'undefined' ? 
                '<span class="text-success">‚úì Cargado</span>' : 
                '<span class="text-danger">‚úó Faltante</span>';
        }

        function testLoadTool() {
            const resultDiv = document.getElementById('loadtool-result');
            resultDiv.style.display = 'block';
            
            try {
                if (typeof app !== 'undefined' && typeof app.loadTool === 'function') {
                    resultDiv.className = 'alert alert-success';
                    resultDiv.innerHTML = '<i class="fas fa-check-circle"></i> <strong>‚úì √âXITO:</strong> Funci√≥n app.loadTool encontrada y disponible';
                    logEvent('[SUCCESS] app.loadTool function verified', 'success');
                } else {
                    resultDiv.className = 'alert alert-danger';
                    resultDiv.innerHTML = '<i class="fas fa-times-circle"></i> <strong>‚úó ERROR:</strong> Funci√≥n app.loadTool no encontrada';
                    logEvent('[ERROR] app.loadTool function not found', 'error');
                }
            } catch (error) {
                resultDiv.className = 'alert alert-danger';
                resultDiv.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <strong>ERROR:</strong> ' + error.message;
                logEvent('[ERROR] Exception in testLoadTool: ' + error.message, 'error');
            }
        }

        function testGeogebraFunctions() {
            const resultDiv = document.getElementById('functions-result');
            resultDiv.style.display = 'block';
            
            try {
                const requiredFunctions = [
                    'loadGeogebraApp',
                    'loadGeogebraAPI', 
                    'initializeGeogebraApplet',
                    'closeGeogebraApp'
                ];
                
                const missing = [];
                
                requiredFunctions.forEach(func => {
                    if (typeof app === 'undefined' || typeof app[func] !== 'function') {
                        missing.push(func);
                    }
                });
                
                if (missing.length === 0) {
                    resultDiv.className = 'alert alert-success';
                    resultDiv.innerHTML = '<i class="fas fa-check-circle"></i> <strong>‚úì √âXITO:</strong> Todas las funciones GeoGebra est√°n disponibles';
                    logEvent('[SUCCESS] All GeoGebra functions verified', 'success');
                } else {
                    resultDiv.className = 'alert alert-warning';
                    resultDiv.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <strong>‚ö† ADVERTENCIA:</strong> Funciones faltantes: ' + missing.join(', ');
                    logEvent('[WARNING] Missing functions: ' + missing.join(', '), 'warning');
                }
            } catch (error) {
                resultDiv.className = 'alert alert-danger';
                resultDiv.innerHTML = '<i class="fas fa-times-circle"></i> <strong>ERROR:</strong> ' + error.message;
                logEvent('[ERROR] Exception in testGeogebraFunctions: ' + error.message, 'error');
            }
        }

        function loadGeogebraDemo() {
            logEvent('[INFO] Loading GeoGebra demo...', 'info');
            
            try {
                if (typeof app !== 'undefined' && typeof app.loadTool === 'function') {
                    app.loadTool('g_Geogebra');
                    logEvent('[SUCCESS] GeoGebra demo loaded successfully', 'success');
                } else {
                    document.getElementById('tool-content').innerHTML = `
                        <div class="alert alert-danger text-center">
                            <h5><i class="fas fa-exclamation-triangle"></i> Error de Carga</h5>
                            <p>La funci√≥n app.loadTool no est√° disponible. Verifique que script1.js est√© cargado correctamente.</p>
                        </div>
                    `;
                    logEvent('[ERROR] app.loadTool function not available', 'error');
                }
            } catch (error) {
                document.getElementById('tool-content').innerHTML = `
                    <div class="alert alert-danger text-center">
                        <h5><i class="fas fa-exclamation-triangle"></i> Error de Carga</h5>
                        <p>Error: ${error.message}</p>
                    </div>
                `;
                logEvent('[ERROR] Exception in loadGeogebraDemo: ' + error.message, 'error');
            }
        }

        function clearDemo() {
            document.getElementById('tool-content').innerHTML = `
                <div class="text-center text-muted">
                    <i class="fas fa-mouse-pointer fa-2x mb-3"></i>
                    <p>Presiona "Cargar GeoGebra" para ver la implementaci√≥n completa</p>
                </div>
            `;
            logEvent('[INFO] Demo cleared', 'info');
        }

        function logEvent(message, type = 'info') {
            const log = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = {
                'info': 'text-info',
                'success': 'text-success', 
                'warning': 'text-warning',
                'error': 'text-danger'
            }[type] || 'text-light';
            
            const logEntry = document.createElement('div');
            logEntry.className = colorClass;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            log.appendChild(logEntry);
            log.scrollTop = log.scrollHeight;
        }
    </script>
</body>
</html>
