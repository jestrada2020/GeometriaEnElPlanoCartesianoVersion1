<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificaci√≥n CSS Alternatives - Final</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true,
            processEnvironments: true
        },
        options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    };
    </script>
    <style>
        .test-section {
            border: 2px solid #ddd;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }
        .success { border-color: #28a745; background-color: #d4edda; }
        .warning { border-color: #ffc107; background-color: #fff3cd; }
        .error { border-color: #dc3545; background-color: #f8d7da; }
        .comparison {
            display: flex;
            gap: 20px;
        }
        .comparison > div {
            flex: 1;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">üîç Verificaci√≥n Final: CSS Alternatives vs LaTeX</h1>
        
        <div class="alert alert-info">
            <h4>Estado del Sistema:</h4>
            <ul>
                <li>‚úÖ CSS Grid y SVG alternativas implementadas</li>
                <li>‚úÖ Integraci√≥n con herramientas de geometr√≠a</li>
                <li>‚úÖ Sistema de validaci√≥n mejorado</li>
                <li>üîç <strong>Verificando funcionamiento actual...</strong></li>
            </ul>
        </div>

        <!-- Prueba 1: CSS Grid vs LaTeX -->
        <div class="test-section">
            <h3>üìä Prueba 1: CSS Grid vs LaTeX Cases</h3>
            <div class="comparison">
                <div>
                    <h5>CSS Grid Alternative</h5>
                    <div id="css-grid-test"></div>
                </div>
                <div>
                    <h5>LaTeX Cases (Traditional)</h5>
                    <div id="latex-cases-test">
                        $$\begin{cases} 
                        x = 3\cos(t) \\ 
                        y = 4\sin(t) 
                        \end{cases}$$
                    </div>
                </div>
            </div>
        </div>

        <!-- Prueba 2: CSS SVG vs LaTeX -->
        <div class="test-section">
            <h3>üé® Prueba 2: CSS SVG vs LaTeX Cases</h3>
            <div class="comparison">
                <div>
                    <h5>CSS SVG Alternative</h5>
                    <div id="css-svg-test"></div>
                </div>
                <div>
                    <h5>LaTeX Cases (Hip√©rbola)</h5>
                    <div id="latex-hyperbola-test">
                        $$\begin{cases} 
                        x = 3\cosh(t) \\ 
                        y = 4\sinh(t) 
                        \end{cases}$$
                    </div>
                </div>
            </div>
        </div>

        <!-- Prueba 3: Conversi√≥n Autom√°tica -->
        <div class="test-section">
            <h3>üîÑ Prueba 3: Conversi√≥n Autom√°tica</h3>
            <div id="conversion-test">
                <p>Elemento original con LaTeX problem√°tico:</p>
                <div class="math">$$\begin{cases} x = a\cos(t) + h \\ y = b\sin(t) + k \end{cases}$$</div>
            </div>
            <button class="btn btn-primary mt-2" onclick="testAutoConversion()">Probar Conversi√≥n Autom√°tica</button>
        </div>

        <!-- Prueba 4: Integraci√≥n con Herramientas -->
        <div class="test-section">
            <h3>‚öôÔ∏è Prueba 4: Integraci√≥n con Herramientas de Geometr√≠a</h3>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-success w-100" onclick="testCirculoIntegration()">Test C√≠rculo</button>
                    <div id="circulo-integration-result" class="mt-2"></div>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-info w-100" onclick="testElipseIntegration()">Test Elipse</button>
                    <div id="elipse-integration-result" class="mt-2"></div>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-warning w-100" onclick="testHiperbolaIntegration()">Test Hip√©rbola</button>
                    <div id="hiperbola-integration-result" class="mt-2"></div>
                </div>
            </div>
        </div>

        <!-- Resultados -->
        <div class="test-section">
            <h3>üìã Resultados de Verificaci√≥n</h3>
            <div id="test-results">
                <!-- Se llenar√°n autom√°ticamente -->
            </div>
        </div>
    </div>

    <script src="js/script1.js"></script>
    <script>
        let testResults = [];

        function addTestResult(test, status, message) {
            testResults.push({ test, status, message });
            updateResultsDisplay();
        }

        function updateResultsDisplay() {
            const resultsDiv = document.getElementById('test-results');
            const html = testResults.map(result => {
                const statusClass = result.status === 'success' ? 'success' : 
                                  result.status === 'warning' ? 'warning' : 'error';
                const icon = result.status === 'success' ? '‚úÖ' : 
                            result.status === 'warning' ? '‚ö†Ô∏è' : '‚ùå';
                
                return `<div class="alert alert-${statusClass === 'error' ? 'danger' : statusClass}">
                    ${icon} <strong>${result.test}:</strong> ${result.message}
                </div>`;
            }).join('');
            
            resultsDiv.innerHTML = html;
        }

        function runInitialTests() {
            console.log('üöÄ Iniciando verificaciones...');
            
            // Test 1: CSS Grid
            try {
                const gridResult = app.casesGrid(['x = 3cos(t)', 'y = 4sin(t)']);
                document.getElementById('css-grid-test').innerHTML = gridResult;
                addTestResult('CSS Grid', 'success', 'Generaci√≥n exitosa de ecuaciones con CSS Grid');
            } catch (error) {
                addTestResult('CSS Grid', 'error', `Error: ${error.message}`);
            }

            // Test 2: CSS SVG
            try {
                const svgResult = app.casesSVG(['x = 3cosh(t)', 'y = 4sinh(t)']);
                document.getElementById('css-svg-test').innerHTML = svgResult;
                addTestResult('CSS SVG', 'success', 'Generaci√≥n exitosa de ecuaciones con CSS SVG');
            } catch (error) {
                addTestResult('CSS SVG', 'error', `Error: ${error.message}`);
            }

            // Test 3: Verificar funciones clave
            const functionTests = [
                { name: 'casesGrid', func: app.casesGrid },
                { name: 'casesSVG', func: app.casesSVG },
                { name: 'formatParametricEquationsAlternative', func: app.formatParametricEquationsAlternative },
                { name: 'convertMathJaxToCSSAlternative', func: app.convertMathJaxToCSSAlternative },
                { name: 'validateAndFixAllMathFormulasWithAlternatives', func: app.validateAndFixAllMathFormulasWithAlternatives }
            ];

            functionTests.forEach(test => {
                if (typeof test.func === 'function') {
                    addTestResult(`Funci√≥n ${test.name}`, 'success', 'Funci√≥n disponible y accesible');
                } else {
                    addTestResult(`Funci√≥n ${test.name}`, 'error', 'Funci√≥n no encontrada o no es funci√≥n');
                }
            });
        }

        function testAutoConversion() {
            const testElement = document.getElementById('conversion-test');
            try {
                app.convertMathJaxToCSSAlternative(testElement, 'svg');
                addTestResult('Conversi√≥n Autom√°tica', 'success', 'Conversi√≥n de LaTeX a CSS realizada exitosamente');
            } catch (error) {
                addTestResult('Conversi√≥n Autom√°tica', 'error', `Error en conversi√≥n: ${error.message}`);
            }
        }

        function testCirculoIntegration() {
            try {
                const result = app.formatParametricEquationsAlternative('r*cos(t)', 'r*sin(t)', 'grid');
                document.getElementById('circulo-integration-result').innerHTML = result;
                addTestResult('Integraci√≥n C√≠rculo', 'success', 'Ecuaciones param√©tricas generadas correctamente');
            } catch (error) {
                addTestResult('Integraci√≥n C√≠rculo', 'error', `Error: ${error.message}`);
            }
        }

        function testElipseIntegration() {
            try {
                const result = app.formatParametricEquationsAlternative('a*cos(t)', 'b*sin(t)', 'svg');
                document.getElementById('elipse-integration-result').innerHTML = result;
                addTestResult('Integraci√≥n Elipse', 'success', 'Ecuaciones param√©tricas generadas correctamente');
            } catch (error) {
                addTestResult('Integraci√≥n Elipse', 'error', `Error: ${error.message}`);
            }
        }

        function testHiperbolaIntegration() {
            try {
                const result = app.formatParametricEquationsAlternative('a*cosh(t)', 'b*sinh(t)', 'svg');
                document.getElementById('hiperbola-integration-result').innerHTML = result;
                addTestResult('Integraci√≥n Hip√©rbola', 'success', 'Ecuaciones param√©tricas generadas correctamente');
            } catch (error) {
                addTestResult('Integraci√≥n Hip√©rbola', 'error', `Error: ${error.message}`);
            }
        }

        // Ejecutar tests iniciales cuando la p√°gina cargue
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runInitialTests, 1000);
        });
    </script>
</body>
</html>
